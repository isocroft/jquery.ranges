(function(n){var t=this;typeof define=="function"&&"amd"in define&&define(["jquery"],n),typeof module!="undefined"&&typeof module.exports=="object"&&n(require("jquery")),t.window===t&&t.jQuery&&n(t.jQuery)})(function(n){"use strict";n.fn.ranges=function(t){var u=!1,r=!0,o="rangeSet",f=this,s;if(!n.isPlainObject(t))if(n(f.selector).data(o)){if(typeof t=="string")return s=arguments[1]!=null||typeof arguments[1]!="undefined"?arguments[1]:"",n(f.selector).prop(t,s);throw new TypeError("invalid first argument to ranges object");}else t={};var h={step:1,max:100,min:0,vals:0,scale:10,roundValues:r,allowArrow:r,inputEditable:u,pinClass:"pin",boxClass:"box",inputTagClass:"tag",arrowSize:8,inputClass:"text",stripClass:"strip",pinEvents:{pinDragStart:function(){},pinDragOn:function(){},pinDragStop:function(){}}},i=n.extend(h,t,r),e=i.max-i.min,t=i.vals>=i.min&&i.max>=i.vals&&e%i.step==0&&i||null,i=null;return n(f.selector).data(o,u),n(f).each(function(i){var lt="pindragstop",nt="mousemove.rangespl",st="pindragstart",ot="pindragon",ct='[role="slider"]',g="aria-value",b="left",p="0px",s="px",ht="relative",k="role",d="class",tt=document.createDocumentFragment(),h=t.vals,at=h/e*100,a=u,it=0,vt=n("<div>").attr(d,"ranges-input-"+t.boxClass),c=n(this).attr(k,"application").css({position:ht}),bt="aria-ranges-"+(c[0].id||"widget"),kt=n("<div id="+bt+' class="ranges-wrapper"><\/div>');c.data(o,r),c.wrap(kt);var w=parseInt(c.css("width")),yt=parseInt(c.css("height")),ti=c.outerWidth(),dt=.25*w,rt=.25*yt,ii=dt*2,gt=rt*2,ut=yt,ni=at/100*w,l=.5*parseInt(ut),v=ni-l,f=n("<a>").css({width:ut-2+s,height:ut-2+s,display:"block",textDecoration:"none",position:"absolute",left:v+s,top:p,margin:p,padding:p,border:"1px solid transparent"}),y=n("<div>").css({height:gt+s,position:ht,padding:p,margin:rt+"px 0px "+rt+"px 0px",width:parseInt(f.css(b))+l+s,border:"none"}),ft=n("<span>"),et=0-l,pt=et+w,wt=function(i,r,u){return v=u<=et?et:u>=pt?pt:u-l,h=(v+l)/w*e,r.attr(g,h),at=h/e*100,i.css(b,v+s),r.css("width",v+l+s),n("input.ranges-input-"+t.inputClass).val(t.roundValues?Math.round(t.scale*h):t.scale*h),h};vt.html('<span class="ranges-input-'+t.inputTagClass+'"><\/span><input type="text" value="'+(t.roundValues?Math.round(t.scale*h):t.scale*h)+'" '+(t.inputEditable?'readonly="readonly"':"")+" tabindex="+i+' class="ranges-input-'+t.inputClass+'" />'),ft.addClass("arrow-ranges").addClass("arrow-ranges-n"),ft.css({color:"#666666",borderWidth:t.arrowSize+s,borderBottomColor:"#999999",borderBottomStyle:"solid",borderBottomWidth:t.arrowSize+s,left:l-10+s}),f.attr(d,"ranges-"+t.pinClass),f.attr("href","javascript:void(0);"),f.attr("click","return false;"),f.attr(k,"pin"),t.allowArrow&&ft.appendTo(f),y.attr(d,"ranges-"+t.stripClass),y.attr(k,"slider"),y.attr(g,t.vals),tt.appendChild(y[0]),tt.appendChild(f[0]),c[0].appendChild(tt),n(c[0].parentNode).append(vt),"vals"in n.propHooks||(n.propHooks.vals={get:function(t){var i=n(t).find(ct).eq(0);return parseFloat(i.attr(g))},set:function(t,i){i=parseInt(i)||0;var r=n(t).find('[role="pin"]').eq(0),u=n(t).find(ct).eq(0);wt(r,u,i-f.width())}});f.on("mousedown",function(){var i=function(t){var i=n.Event(ot),r=t.clientX-f.width();i.value=wt(f,y,r),n(document).trigger(i)},e=n.Event(st);a||(a=r),it=this,v=parseInt(n(it).css(b)),it.ondragstart=function(){return u},a&&(e.value=c.prop("vals"),n(document).trigger(e),n.throttle?n(document).bind(nt,n.throttle(10,r,i)):n(document).bind(nt,function(n){i(n)}))});n(document).on(st,t.pinEvents.pinDragStart).on(ot,t.pinEvents.pinDragOn).on(lt,t.pinEvents.pinDragStop).on("mouseup",function(){a&&(a=u,n(this).trigger(lt)),a||n(document).unbind(nt)})})}})